# create database pms character set gbk collate gbk_chinese_ci; 


#描述：用户表
#id
#userEmail 用户email
#password 口令
#realName 真名
#mobileNum 手机号
#signWithUs 是否签约

CREATE TABLE dia_user
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        userEmail VARCHAR(20),
        password VARCHAR(20),
        realName VARCHAR(30),
        mobileNum VARCHAR(20),
        signWithUs CHAR(10),
        enterpriseID INTEGER,
        currentIdentity CHAR(1),
        status INTEGER,
        thisGuysProfessinal TEXT,
        remark VARCHAR(50),
        PRIMARY KEY (id)
) 
;

#描述：角色-权限对应表
#id
#roleId 角色ID
#permissionId 权限ID
#remark 备用

CREATE TABLE dia_role_permission
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        roleId INTEGER,
        permissionId INTEGER,
        remark INTEGER,
        PRIMARY KEY (id)
) 
;


#描述：角色表
#id
#rolename 角色名称

CREATE TABLE dia_role
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        rolename VARCHAR(50),
        remark INTEGER,
        PRIMARY KEY (id)
) 
;


#描述：权限表
#id
#permissionName 权限名称
#

CREATE TABLE dia_permission
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        permissionName VARCHAR(30),
        remark INTEGER,
        PRIMARY KEY (id)
) 
;



#描述：用户-权限存储表
#id
#userid 用户ID 
#roleId 角色ID
#remark 备用字段

CREATE TABLE dia_user_role
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        userId INTEGER,
        roleId INTEGER,
        remark VARCHAR(50),
        PRIMARY KEY (id)
) 
;


#描述：模块存储 
#id 
#model_name 模块名称 
#project_id 项目id 
#content 模块内容 

CREATE TABLE dia_model
(
	id INTEGER NOT NULL AUTO_INCREMENT,
	model_name VARCHAR(200),
	project_id INTEGER,
	content TEXT,
	PRIMARY KEY (id),
	KEY (project_id)
) 
;




#描述：整理后需求
#id
#request_org_id 初始需求id
#input 输入
#output 输出
#description 描述 
#effectEstimate 影响评估
#dealprocess 处理流程
#createbyid 建立人
#createbydatetime 建立时间
#remark 预留

CREATE TABLE dia_request_init
( id INTEGER NOT NULL AUTO_INCREMENT,
	request_org_id BIGINT,
	input VARCHAR(2000),
	output VARCHAR(2000),
	description TEXT,
	effectEstimate TEXT,
	dealprocess TEXT,
	createbyid INTEGER,
	createdatetime DATETIME,
	remark BIGINT,
	PRIMARY KEY (id),
	KEY (request_org_id)
) 
;


#描述：用例表
#id 
#testtitle 用例标题
#testContent 用例内容
#testStatus 用例状态
#testResult 用例结果
#devID 开发csr的ID
#beginDate 开始日期
#endDate 结束日期
#createDatetime 建立时间
#createByID 建立人
#remark 备用字段

CREATE TABLE dia_test_case
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        testtitle VARCHAR(50),
        testContent TEXT,
        testStatus CHAR(1),
        testResult VARCHAR(200),
        devID INTEGER,
        beginDate DATETIME,
        endDate DATETIME,
        createDatetime DATETIME,
        createByID INTEGER,
        remark BIGINT,
        PRIMARY KEY (id),
        KEY (devID)
) 
;




#描述：原始需求表
#id
#title 需求标题
#detail 具体需求细节
#attach1 附件1
#attach2 附件2
#price 价格
#projectID 项目ID
#status 状态 
#beginDate 开始日期
#endDate 结束日期
#request_type 需求类型，0---新需求，1---任务，2---BUG，3---优化
#prior_level 优先级别，0---次要，1---一般，2---重要
#model_id 模块ID
#createDatetime 建立时间
#createById 建立人
#remark 备用

CREATE TABLE dia_request_org
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        title VARCHAR(50),
        detail TEXT,
        attach1 VARCHAR(200),
        attach2 VARCHAR(200),
        price INTEGER,
        projectID INTEGER,
        status INTEGER,
        beginDate DATETIME,
        endDate DATETIME,
        model_id INTEGER,
        createDatetime DATETIME,
        createByID INTEGER,
        remark VARCHAR(50),
        PRIMARY KEY (id),
        KEY (model_id),
        KEY (projectID)
) 
;


#描述：项目种类
#id
#typeName 种类名称
#remark 备用

CREATE TABLE dia_project_type
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        typeName VARCHAR(30),
        remark INTEGER,
        PRIMARY KEY (id)
) 
;


#描述：项目表
#id
#title 项目标题
#type 项目类型
#alils 别名
#picture1 图片1
#picture2 图片2
#picture3 图片3
#picture4 图片4
#picture5 图片5
#project_detail 项目内容描述
#begin_date 开始日期
#end_date 结束日期
#csr_count csr数量
#budget 预算
#current_status 当前状态 0 未开始 1 已开始 2 已结束
#payedornot 是否已付费
#icopic 项目图标
#createdatetime 建立日期
#createbyid 建立人
#attach1 附件1
#attach2 附件2
#keywords 关键字
#remark 备用

CREATE TABLE dia_project
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        title VARCHAR(100),
        type INTEGER,
        alils VARCHAR(100),
        picture1 VARCHAR(200),
        picture2 VARCHAR(200),
        picture3 VARCHAR(200),
        picture4 VARCHAR(200),
        picture5 VARCHAR(200),
        project_detail TEXT,
        begin_date DATETIME,
        end_date DATETIME,
        csr_count INTEGER,
        budget INTEGER,
        current_status INTEGER,
        payedornot BIGINT,
        icopic VARCHAR(200),
        createDatetime DATETIME,
        createByID INTEGER,
        attach1 VARCHAR(200),
        attach2 VARCHAR(200),
        keywords VARCHAR(100),
        remark BIGINT,
        PRIMARY KEY (id),
        KEY (Type)
) 
;




#描述：整体设计表
#id
#designTarget 设计目标
#devLanguage 开发语言
#devDatabase 所用数据库
#detail 设计细节
#projectID 项目ID
#attach1 附件1
#attach2 附件2
#key_tech 关键技术
#codeaddress 源代码地址
#createByID 建立人
#createDatetime 建立日期 

CREATE TABLE dia_framework_design
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        designTarget TEXT,
        devLanguage VARCHAR(50),
        devDatabase VARCHAR(50),
        detail TEXT,
        projectID INTEGER,
        attach1 VARCHAR(200),
        attach2 VARCHAR(200),
        key_tech VARCHAR(300),
        codeaddress VARCHAR(300),
        createByID INTEGER,
        createDatetime DATETIME,
        remark BIGINT,
        PRIMARY KEY (id),
        KEY (projectID)
) 
;


#描述：企业表
#id
#enterpriseName 企业名称
#signWithUs 签约情况
#intro 介绍
#remark 备用

CREATE TABLE dia_enterprise
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        enterpriseName VARCHAR(100),
        signWithUs CHAR(10),
        intro TEXT,
        remark BIGINT,
        PRIMARY KEY (id)
) 
;


#描述：开发表
#id
#csrTitle 开发标题
#csrDetial 开发细节
#status 开发状态
#attach1 附件1
#attach2 附件2
#csrLevel 难易度等级
#beginDate 开始时间
#endDate 结束时间
#detailDesignID 详细设计ID
#createDatetime 建立日期
#createbyID 建立人
#remark 备用


CREATE TABLE dia_develope_csr
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        csrTitle VARCHAR(30),
        csrDetail TEXT,
        status INTEGER,
        attach1 TEXT,
        attach2 TEXT,
        csrLevel INTEGER,
        beginDate DATETIME,
        endDate DATETIME,
        detailDesignID INTEGER,
        createDatetime DATETIME,
        createbyID INTEGER,
        remark BIGINT,
        PRIMARY KEY (id),
        KEY (detailDesignID)
) 
;


#描述：详细设计表
#id
#frameworkDesignID 总体设计ID
#title VARCHAR(100) 标题
#detail 设计细节
#attach1 附件1
#attach2 附件2
#request_init_ID 整理后需求ID
#beginDate 开始日期
#endDate 结束日期
#createDatetime 建立日期
#createByID 建立人
#remark 备用

CREATE TABLE dia_detail_design
(
        id INTEGER NOT NULL AUTO_INCREMENT,
        frameworkDesignID INTEGER,
        title VARCHAR(100),
        detail TEXT,
        attach1 VARCHAR(200),
        attach2 VARCHAR(200),
        request_init_ID INTEGER,
        beginDate DATETIME,
        endDate DATETIME,
        createDatetime DATETIME,
        createByID INTEGER,
        remark BIGINT,
        PRIMARY KEY (id),
        KEY (request_init_ID)
) 
;

/*
alter table dia_request_org add constraint fk_dia_request_org foreign key(projectID) references dia_project(id);

drop table dia_model;
drop table dia_detail_design;
drop table dia_framework_design;
drop table dia_project;
drop table dia_request_init;
drop table dia_develope_csr;
drop table dia_enterprise;
drop table dia_permission;
drop table dia_project_type;
drop table dia_request_org;
drop table dia_role;
drop table dia_role_permission;
drop table dia_test_case;
drop table dia_user;
drop table dia_user_role;

insert into dia_project(title,project_detail) values('测试项目1','这个项目是一个测试项目');
insert into dia_project(title,project_detail) values('测试项目2','这个项目是一个测试项目');
insert into dia_project(title,project_detail) values('测试项目3','这个项目是一个测试项目');

*/
